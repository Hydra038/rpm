"use strict";exports.id=281,exports.ids=[281],exports.modules={12800:(a,b,c)=>{c.d(b,{A:()=>p,h:()=>q});var d=c(21124),e=c(56351),f=c(45119),g=c(19217),h=c(23673),i=c(23339);let j=(0,i.A)("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),k=(0,i.A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);var l=c(58368),m=c(23928),n=c(38301),o=c(10643);function p({id:a,name:b,price:c,image_url:i,category:p,stock_quantity:q,rating:r,isOnSale:s,originalPrice:t}){let u=(0,e.x)(a=>a.addToCart),[v,w]=(0,n.useState)(!1),[x,y]=(0,n.useState)(null),[z,A]=(0,n.useState)(!1),[B,C]=(0,n.useState)(!1);async function D(){if(!x){window.location.href="/login";return}A(!0);try{if(v){let{error:b}=await o.N.from("wishlist").delete().eq("user_id",x.id).eq("product_id",parseInt(a));b||w(!1)}else{let{error:b}=await o.N.from("wishlist").insert({user_id:x.id,product_id:parseInt(a)});b||w(!0)}}catch(a){console.error("Error toggling wishlist:",a)}finally{A(!1)}}return(0,d.jsx)(f.Zp,{className:"group hover:shadow-lg transition-all duration-200 overflow-hidden relative",children:(0,d.jsxs)(f.Wu,{className:"p-0",children:[(0,d.jsxs)("div",{className:"aspect-square bg-gray-50 relative overflow-hidden",children:[(0,d.jsxs)("div",{className:"absolute top-2 left-2 z-10 flex flex-col gap-1",children:[s&&(0,d.jsx)("span",{className:"bg-red-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Sale"}),void 0!==q&&q<5&&q>0&&(0,d.jsx)("span",{className:"bg-orange-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Low Stock"}),0===q&&(0,d.jsx)("span",{className:"bg-gray-500 text-white text-xs px-2 py-1 rounded-full font-medium",children:"Out of Stock"})]}),(0,d.jsx)("div",{className:"absolute top-2 right-2 z-10",children:(0,d.jsx)(g.$,{variant:"ghost",size:"sm",onClick:D,disabled:z,className:"w-8 h-8 p-0 bg-white/80 hover:bg-white backdrop-blur-sm rounded-full",children:(0,d.jsx)(h.A,{className:`w-4 h-4 ${v?"fill-red-500 text-red-500":"text-gray-600"}`})})}),(0,d.jsx)("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center",children:(0,d.jsxs)(g.$,{variant:"secondary",size:"sm",className:"opacity-90",children:[(0,d.jsx)(j,{className:"w-4 h-4 mr-2"}),"Quick View"]})}),i?(0,d.jsx)("img",{src:i,alt:b,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):(0,d.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100",children:(0,d.jsx)("div",{className:"text-gray-400 text-sm",children:"No Image"})})]}),(0,d.jsxs)("div",{className:"p-4",children:[p&&(0,d.jsx)("p",{className:"text-xs text-gray-500 uppercase tracking-wide mb-1",children:p}),(0,d.jsx)("h3",{className:"font-semibold text-lg mb-2 line-clamp-2 min-h-[2.5rem] group-hover:text-blue-600 transition-colors",children:b}),r&&(0,d.jsxs)("div",{className:"flex items-center gap-1 mb-2",children:[(0,d.jsx)("div",{className:"flex",children:[1,2,3,4,5].map(a=>(0,d.jsx)(k,{className:`w-3 h-3 ${a<=r?"fill-yellow-400 text-yellow-400":"text-gray-300"}`},a))}),(0,d.jsxs)("span",{className:"text-xs text-gray-500",children:["(",r.toFixed(1),")"]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,d.jsx)("span",{className:"text-2xl font-bold text-blue-600",children:(0,m.v)(c)}),s&&t&&(0,d.jsx)("span",{className:"text-sm text-gray-500 line-through",children:(0,m.v)(t)})]}),void 0!==q&&(0,d.jsx)("div",{className:"text-xs text-gray-600 mb-3",children:q>0?(0,d.jsx)(d.Fragment,{children:q<5?(0,d.jsxs)("span",{className:"text-orange-600",children:["Only ",q," left in stock"]}):(0,d.jsxs)("span",{className:"text-green-600",children:["In Stock (",q," available)"]})}):(0,d.jsx)("span",{className:"text-red-600",children:"Out of Stock"})}),(0,d.jsxs)(g.$,{onClick:function(){C(!0),u({id:a,name:b,price:c,image_url:i||"",quantity:1});let d=JSON.parse(localStorage.getItem("rpm-recently-viewed")||"[]"),e=[{id:parseInt(a),name:b,price:c,image_url:i,category:p},...d.filter(b=>b.id!==parseInt(a))].slice(0,10);localStorage.setItem("rpm-recently-viewed",JSON.stringify(e)),setTimeout(()=>C(!1),1e3)},disabled:0===q||B,className:"w-full gap-2",size:"sm",children:[(0,d.jsx)(l.A,{className:"w-4 h-4"}),B?"Adding...":0===q?"Out of Stock":"Add to Cart"]})]})]})})}c(12922);let q=p},40281:(a,b,c)=>{c.d(b,{W:()=>k});var d=c(21124),e=c(38301),f=c(12800),g=c(58368),h=c(23673),i=c(19217),j=c(45119);function k({currentProduct:a,recentlyViewed:b=[],userPurchases:c=[]}){let[k,l]=(0,e.useState)([]),[m,n]=(0,e.useState)(!0);return m?(0,d.jsxs)(j.Zp,{children:[(0,d.jsx)(j.aR,{children:(0,d.jsx)(j.ZB,{children:"Recommended for You"})}),(0,d.jsx)(j.Wu,{children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[1,2,3,4].map(a=>(0,d.jsxs)("div",{className:"animate-pulse",children:[(0,d.jsx)("div",{className:"bg-gray-300 h-40 rounded-lg mb-2"}),(0,d.jsx)("div",{className:"bg-gray-300 h-4 rounded mb-1"}),(0,d.jsx)("div",{className:"bg-gray-300 h-4 rounded w-3/4"})]},a))})})]}):0===k.length?null:(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsxs)(j.Zp,{children:[(0,d.jsx)(j.aR,{children:(0,d.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(g.A,{className:"w-5 h-5"}),a?"Related Products":"Recommended for You"]})}),(0,d.jsx)(j.Wu,{children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:k.map(a=>(0,d.jsx)(f.h,{...a,id:a.id.toString()},a.id))})})]}),b.length>0&&(0,d.jsxs)(j.Zp,{children:[(0,d.jsx)(j.aR,{children:(0,d.jsxs)(j.ZB,{className:"flex items-center gap-2",children:[(0,d.jsx)(h.A,{className:"w-5 h-5"}),"Recently Viewed"]})}),(0,d.jsx)(j.Wu,{children:(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:b.slice(0,4).map(a=>(0,d.jsx)(f.h,{...a,id:a.id.toString()},a.id))})})]}),a&&(0,d.jsxs)(j.Zp,{children:[(0,d.jsx)(j.aR,{children:(0,d.jsx)(j.ZB,{children:"Frequently Bought Together"})}),(0,d.jsx)(j.Wu,{children:(0,d.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[(0,d.jsxs)("div",{className:"flex-shrink-0",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,d.jsx)(g.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("p",{className:"text-sm font-medium mt-2 text-center",children:"This item"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["\xa3",a.price.toFixed(2)]})]}),(0,d.jsx)("div",{className:"text-2xl text-gray-400",children:"+"}),k.slice(0,2).map((a,b)=>(0,d.jsxs)("div",{className:"flex-shrink-0",children:[(0,d.jsx)("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,d.jsx)(g.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("p",{className:"text-sm font-medium mt-2 text-center truncate",children:a.name}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 text-center",children:["\xa3",a.price.toFixed(2)]}),b<1&&(0,d.jsx)("div",{className:"text-2xl text-gray-400 text-center mt-2",children:"+"})]},a.id)),(0,d.jsxs)("div",{className:"ml-4",children:[(0,d.jsx)(i.$,{size:"sm",className:"whitespace-nowrap",children:"Add All to Cart"}),(0,d.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Total: \xa3",(a.price+k.slice(0,2).reduce((a,b)=>a+b.price,0)).toFixed(2)]})]})]})})]})]})}}};