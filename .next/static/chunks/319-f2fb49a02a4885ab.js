"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[319],{63:(e,r,a)=>{var s=a(7260);a.o(s,"useParams")&&a.d(r,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(r,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(r,{useSearchParams:function(){return s.useSearchParams}})},508:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},512:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(1847).A)("shopping-cart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},1847:(e,r,a)=>{a.d(r,{A:()=>d});var s=a(2115);let t=e=>{let r=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,a)=>a?a.toUpperCase():r.toLowerCase());return r.charAt(0).toUpperCase()+r.slice(1)},i=function(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return r.filter((e,r,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===r).join(" ").trim()};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,s.forwardRef)((e,r)=>{let{color:a="currentColor",size:t=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:c="",children:o,iconNode:m,...u}=e;return(0,s.createElement)("svg",{ref:r,...n,width:t,height:t,stroke:a,strokeWidth:d?24*Number(l)/Number(t):l,className:i("lucide",c),...!o&&!(e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0})(u)&&{"aria-hidden":"true"},...u},[...m.map(e=>{let[r,a]=e;return(0,s.createElement)(r,a)}),...Array.isArray(o)?o:[o]])}),d=(e,r)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:d,...c}=a;return(0,s.createElement)(l,{ref:n,iconNode:r,className:i("lucide-".concat(t(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),d),...c})});return a.displayName=t(e),a}},2319:(e,r,a)=>{a.d(r,{A:()=>v});var s=a(5155),t=a(2115),i=a(63),n=a(8525),l=a(3209),d=a(7003),c=a(5870),o=a(508),m=a(1847);let u=(0,m.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),h=(0,m.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var x=a(512),p=a(6617),f=a(8519),g=a(2619),y=a.n(g);function v(e){let{children:r}=e,[a,m]=(0,t.useState)(null),[g,v]=(0,t.useState)(!0),[N,j]=(0,t.useState)(!1),[b,w]=(0,t.useState)(!1),k=(0,i.useRouter)();(0,t.useEffect)(()=>{!async function(){try{let{data:{user:e},error:r}=await n.N.auth.getUser();if(r||!e)return void k.push("/login");m(e);let{data:a,error:s}=await n.N.from("user_profiles").select("role").eq("user_id",e.id).single();if(!s&&a&&"admin"===a.role)j(!0);else{if("support@rpmgenuineautoparts.info"!==e.email)return void k.push("/");let{data:r}=await n.N.from("user_profiles").select("role").eq("email",e.email).single();r&&"admin"===r.role?j(!0):w(!0)}}catch(e){console.error("Auth check failed:",e),k.push("/login")}finally{v(!1)}}()},[k]);let A=async()=>{try{window.location.reload()}catch(e){console.error("Admin setup failed:",e)}},C=async()=>{await n.N.auth.signOut(),k.push("/")};return g?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(l.Zp,{children:(0,s.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{children:"Checking authentication..."})]})})})}):a&&(N||b)?b&&"support@rpmgenuineautoparts.info"===a.email?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(l.Zp,{className:"max-w-md mx-auto",children:(0,s.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Admin Setup"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"Welcome! You're logged in as the designated admin user. Your admin profile should already be set up. Click below to refresh and check your admin status."}),(0,s.jsx)("p",{className:"text-sm text-blue-600 mb-6",children:a.email}),(0,s.jsx)(d.$,{onClick:A,className:"w-full",children:"Check Admin Status"})]})})})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white shadow-sm border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(y(),{href:"/",className:"text-2xl font-bold text-blue-600",children:"RPM Admin"}),(0,s.jsxs)("div",{className:"hidden md:flex items-center gap-1 text-sm text-gray-600",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),"Administration Panel"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"hidden sm:flex items-center gap-2 text-sm text-gray-600",children:[(0,s.jsx)(o.A,{className:"h-4 w-4"}),a.email]}),(0,s.jsxs)(d.$,{variant:"outline",size:"sm",onClick:C,children:[(0,s.jsx)(u,{className:"h-4 w-4 mr-1"}),"Sign Out"]})]})]})})}),(0,s.jsx)("div",{className:"bg-white border-b",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("nav",{className:"flex gap-6 py-3",children:[(0,s.jsxs)(y(),{href:"/admin",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(h,{className:"h-4 w-4"}),"Dashboard"]}),(0,s.jsxs)(y(),{href:"/admin/orders",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(x.A,{className:"h-4 w-4"}),"Orders"]}),(0,s.jsxs)(y(),{href:"/admin/products",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Products"]}),(0,s.jsxs)(y(),{href:"/admin/payment-settings",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(f.A,{className:"h-4 w-4"}),"Payment Settings"]}),(0,s.jsxs)(y(),{href:"/admin/inventory",className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors",children:[(0,s.jsx)(c.A,{className:"h-4 w-4"}),"Inventory"]})]})})}),(0,s.jsx)("div",{className:"container mx-auto p-4",children:r})]}):(0,s.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,s.jsx)("div",{className:"container mx-auto p-4",children:(0,s.jsx)(l.Zp,{children:(0,s.jsxs)(l.Wu,{className:"p-8 text-center",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Admin Access Required"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"You need admin privileges to access this area."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Current user: ",(null==a?void 0:a.email)||"Not logged in"]}),(0,s.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,s.jsx)(y(),{href:"/",children:(0,s.jsx)(d.$,{variant:"outline",children:"Back to Store"})}),(0,s.jsx)(d.$,{onClick:C,children:"Sign Out"})]})]})]})})})})}},3209:(e,r,a)=>{a.d(r,{Wu:()=>c,ZB:()=>d,Zp:()=>n,aR:()=>l});var s=a(5155),t=a(2115),i=a(5016);let n=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow",a),...t})});n.displayName="Card";let l=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...t})});l.displayName="CardHeader";let d=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});d.displayName="CardTitle",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})}).displayName="CardDescription";let c=t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",a),...t})});c.displayName="CardContent",t.forwardRef((e,r)=>{let{className:a,...t}=e;return(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter"},5016:(e,r,a)=>{a.d(r,{cn:()=>i});var s=a(2821),t=a(5889);function i(){for(var e=arguments.length,r=Array(e),a=0;a<e;a++)r[a]=arguments[a];return(0,t.QP)((0,s.$)(r))}},5870:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(1847).A)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},6617:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(1847).A)("package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]])},7003:(e,r,a)=>{a.d(r,{$:()=>c});var s=a(5155),t=a(2115),i=a(6673),n=a(3101),l=a(5016);let d=(0,n.F)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-50",secondary:"bg-gray-100 text-gray-900 hover:bg-gray-200",ghost:"hover:bg-gray-100 hover:text-gray-900",link:"underline-offset-4 hover:underline text-blue-600"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=t.forwardRef((e,r)=>{let{className:a,variant:t,size:n,asChild:c=!1,...o}=e,m=c?i.DX:"button";return(0,s.jsx)(m,{className:(0,l.cn)(d({variant:t,size:n,className:a})),ref:r,...o})});c.displayName="Button"},8519:(e,r,a)=>{a.d(r,{A:()=>s});let s=(0,a(1847).A)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},8525:(e,r,a)=>{a.d(r,{N:()=>s});let s=(0,a(5040).UU)("https://mhfdvmeaipmuowjujyrc.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1oZmR2bWVhaXBtdW93anVqeXJjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTg2MTYyMDIsImV4cCI6MjA3NDE5MjIwMn0.3F2BM5J0di1K5Xidcgpn8tKGZT7McJ5GvUxFbNpCHGs")}}]);